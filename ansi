<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>mysql.pl</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl lin">    1 </span><span class="hl slc">#!/usr/bin/perl</span>
<span class="hl lin">    2 </span><span class="hl kwa">use</span> strict<span class="hl opt">;</span>
<span class="hl lin">    3 </span><span class="hl kwa">use</span> warnings<span class="hl opt">;</span>
<span class="hl lin">    4 </span><span class="hl kwa">use</span> DBIx<span class="hl opt">::</span>Class<span class="hl opt">;</span>
<span class="hl lin">    5 </span><span class="hl kwa">use</span> DBI<span class="hl opt">;</span> 
<span class="hl lin">    6 </span>
<span class="hl lin">    7 </span><span class="hl kwc">unlink</span> <span class="hl str">&apos;dbitrace.log&apos;</span> <span class="hl kwa">if</span> <span class="hl opt">-</span>e <span class="hl str">&apos;dbitrace.log&apos;</span><span class="hl opt">;</span>
<span class="hl lin">    8 </span><span class="hl kwc">my</span> <span class="hl kwb">$dbh</span><span class="hl opt">=</span>DBI<span class="hl opt">-&gt;</span><span class="hl kwc">connect</span><span class="hl opt">(</span><span class="hl str">&quot;dbi:mysql:employees&quot;</span><span class="hl opt">,</span><span class="hl str">&quot;xuhui&quot;</span><span class="hl opt">,</span><span class="hl str">&quot;flower&quot;</span><span class="hl opt">)</span> <span class="hl kwc">or die</span> <span class="hl str">&quot;Can not connect Mysql:&quot;</span><span class="hl opt">;</span>
<span class="hl lin">    9 </span>DBI<span class="hl opt">-&gt;</span><span class="hl kwd">trace</span><span class="hl opt">(</span><span class="hl num">1</span><span class="hl opt">,</span><span class="hl str">&apos;dbitrace.log&apos;</span><span class="hl opt">);</span>
<span class="hl lin">   10 </span><span class="hl kwc">my</span> <span class="hl kwb">$stmt</span><span class="hl opt">=</span><span class="hl kwb">$dbh</span><span class="hl opt">-&gt;</span><span class="hl kwd">prepare</span><span class="hl opt">(</span><span class="hl str">&quot;select * from employees limit 10&quot;</span><span class="hl opt">);</span> 
<span class="hl lin">   11 </span><span class="hl kwb">$stmt</span><span class="hl opt">-&gt;</span><span class="hl kwd">execute</span><span class="hl opt">;</span>
<span class="hl lin">   12 </span>DBI<span class="hl opt">-&gt;</span><span class="hl kwd">trace</span><span class="hl opt">(</span><span class="hl num">2</span><span class="hl opt">,</span><span class="hl str">&apos;dbitrace.log&apos;</span><span class="hl opt">);</span>
<span class="hl lin">   13 </span><span class="hl kwc">my</span> <span class="hl kwb">&#64;row</span><span class="hl opt">;</span>
<span class="hl lin">   14 </span><span class="hl kwa">while</span><span class="hl opt">(</span><span class="hl kwb">&#64;row</span><span class="hl opt">=</span><span class="hl kwb">$stmt</span><span class="hl opt">-&gt;</span><span class="hl kwd">fetchrow_array</span><span class="hl opt">){</span>
<span class="hl lin">   15 </span>	<span class="hl kwc">print</span> <span class="hl str">&quot;Row:</span> <span class="hl ipl">&#64;row</span><span class="hl str"></span><span class="hl esc">\n</span><span class="hl str">&quot;</span><span class="hl opt">;</span>
<span class="hl lin">   16 </span>	
<span class="hl lin">   17 </span><span class="hl opt">}</span>
<span class="hl lin">   18 </span>
<span class="hl lin">   19 </span><span class="hl kwb">$dbh</span><span class="hl opt">-&gt;</span><span class="hl kwd">disconnect</span><span class="hl opt">;</span>
<span class="hl lin">   20 </span><span class="hl kwa">sub</span> doPrepare<span class="hl opt">{</span>
<span class="hl lin">   21 </span><span class="hl kwc">print</span> <span class="hl str">&quot;Preparing and executing statement</span><span class="hl esc">\n</span><span class="hl str">&quot;</span><span class="hl opt">;</span>
<span class="hl lin">   22 </span>	<span class="hl kwc">my</span> <span class="hl kwb">$th</span><span class="hl opt">=</span><span class="hl kwb">$dbh</span><span class="hl opt">-&gt;</span><span class="hl kwd">prepare</span><span class="hl opt">(</span><span class="hl str">&quot;</span>
<span class="hl lin">   23 </span><span class="hl str">	SELECT * FROM employees LIMIT 10&quot;</span><span class="hl opt">);</span>
<span class="hl lin">   24 </span>	<span class="hl kwb">$th</span><span class="hl opt">-&gt;</span><span class="hl kwd">execute</span><span class="hl opt">;</span>
<span class="hl lin">   25 </span>	<span class="hl kwa">return</span>
<span class="hl lin">   26 </span><span class="hl opt">}</span>
<span class="hl lin">   27 </span>
</pre>
</body>
</html>
<!--HTML generated by highlight 3.41, http://www.andre-simon.de/-->
